#!/usr/bin/env bash
set -euo pipefail

echo "==> Checking minikube installation..."
if ! command -v minikube >/dev/null 2>&1; then
  echo "minikube not found. Please install minikube and kubectl first."
  exit 1
fi

echo "==> Starting minikube (driver: docker)..."
# you can change --driver if you use another driver (virtualbox, hyperkit, none)
minikube start --driver=docker

echo "==> Waiting for K8s to be ready..."
kubectl wait --for=condition=Ready nodes --all --timeout=120s || true

echo
echo "==> Cluster info:"
kubectl cluster-info

echo
echo "==> All pods (all namespaces):"
kubectl get pods -A

echo
echo "==> Getting kube-system pods (to confirm addons):"
kubectl get pods -n kube-system

echo
echo "==> Minikube status:"
minikube status

echo "==> Done."
